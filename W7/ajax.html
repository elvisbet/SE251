<!DOCTYPE html>
<html>
<head>
<title>AJAX Assignment</title>
	<style type="text/css">
		section{	
			margin-bottom:25px;
		}
		section section{
			width:100%;
			float:left;
			border:1px solid black;
		}
		#main-content section{
			width:33%;
			float:left;
		}
		#main-content{
			margin-bottom:25px;
		}
	</style>
</head>
<body>
	<div id="main-content">
		<script>
		fetch('https://neit-se266-class.herokuapp.com/salaries.php')
        .then(response => response.json())
        .then(people => {
            var body = document.querySelector(`body`);
			var start1=0;
			var start2=0;
			var start3=0;
			var cnt=0
			var sbt=document.querySelector(`#search-submit`)
			var fname=document.querySelector(`#first-name`)
			var lname=document.querySelector(`#last-name`)
			var sOutput=document.querySelector(`#search-output`)
            for (let i = 0; i <100; i++) {
				cnt+=1
				var ind=people[i]
				var p =ind.name
				sbt.addEventListener(`click`, (e) => {
					var v=people[i].name
					//console.log(v)
					if(fname.value==v.first &&lname.value==v.last){
						nameF=v.first
						nameL=v.last
						psal=people[i].salary
						pjob=people[i].jobTitle

						sOutput.innerHTML+=`<p>Name:${nameF} ${nameL}</p>
						<p>Salary:${psal}</p> <p>Job Title:${pjob} </p>`
					}
				
				})
				
				var sal=ind.salary
				var job=ind.jobTitle
				
				//start=people[0].salary				
				if(start1 < sal && job=="Web Developer"){
					start1=sal
					var fname1=p.first
					var lname1=p.last
					var job1=ind.jobTitle
					var total1=sal++
								
				}	
				
				else if(start2 < sal && job=="Database Analyst"){
					start2=sal		
					var fname2=p.first
					var lname2=p.last
					var job2=ind.jobTitle
					var total2=sal++
	
				}
				else if(start3 < sal && job=="Software Developer"){
					start3=sal
					var fname3=p.first
					var lname3=p.last
					var job3=ind.jobTitle	
					var total3=start3++
				}

			}
			console.log(total1);
			var tempDiv = document.querySelector(`#main-content`)
			var avg1=total1/cnt
			var avg2=total2/cnt
			var avg3=total3/cnt
			var web=document.querySelector(`#database-analyst-area`)
			web.innerHTML+=`<p>${fname1}</p> <p> ${lname1}</p> <p>${start1}</p> <p>${avg1}</p>`
			var data=document.querySelector(`#web-developer-area`)
			data.innerHTML+=`<p>${fname2}</p> <p> ${lname2}</p> <p>${start2}</p> <p>${avg2}</p>`
			var se=document.querySelector(`#software-developer-area`)
			se.innerHTML+=`<p>${fname3}</p> <p> ${lname3}</p> <p>${start3}</p> <p>${avg3}</p>`
			var anList=document.querySelector(`#list-database-analyst`)
			var webList=document.querySelector(`#list-web-developer`)
			var seList=document.querySelector(`#list-software-developers`)
			var outList=document.querySelector(`#list-output`)

			anList.addEventListener(`click`, (e) => {
				while(outList.firstChild){
    				outList.removeChild(outList.firstChild);
				}
				for(let i=0 ;i<100 ;i++){
					if(people[i].jobTitle == "Database Analyst"){
					var n=people[i].name
					outList.innerHTML+=`<p>Name:${n.first} ${n.last}</br> Salary:${people[i].salary}</p>`
					}
				}
		
		})
			webList.addEventListener(`click`, (e) => {
				while(outList.firstChild){
    				outList.removeChild(outList.firstChild);
				}
				for(let i=0 ;i<100 ;i++){
					if(people[i].jobTitle == "Web Developer"){
					var n=people[i].name
					outList.innerHTML+=`<p>Name:${n.first} ${n.last}</br> Salary:${people[i].salary}</p>`
					}
				}
		
		})
			seList.addEventListener(`click`, (e) => {
				while(outList.firstChild){
    				outList.removeChild(outList.firstChild);
				}
				for(let i=0 ;i<100 ;i++){
					if(people[i].jobTitle == "Software Developer"){
					var n=people[i].name
					outList.innerHTML+=`<p>Name:${n.first} ${n.last}</br> Salary:${people[i].salary}</p>`
					}
				}
		
		})
		
	})
		

		
	
		</script>
		<!--
			Find the highest paid employee for each job listed below
			Then use JavaScript to fill in the information
		-->
		<!--Once you are done filling in all of the jobs, you will turn the highest average salary green -->
		<section id="database-analyst-area" >
			<h2>Database Analyst | Highest Paid</h2>
			<h3>First Name:</h3>
			<div class="first"></div>
			<h3>Last Name:</h3>
			<div class="last"><!--The last name goes here--></div>
			<h3>Salary:</h3>
			<div class="salary"><!--The salary goes here--></div>
			<h3>Average Salary:</h3>
			<h3 class="average"><!--The average salary for all database-analysts goes here--></h3>
			
		</section>
     
		<section  id="web-developer-area" >
			<h2>Web Developer | Highest Paid </h2>
			<h3>First Name:</h3>
			<div class="first"></div>
			<h3>Last Name:</h3>
			<div class="last"></div>
			<h3>Salary:</h3>
			<div class="salary"></div>
			<h3>Average Salary:</h3>
			<h3 class="average"></h3>

		</section >

		<section  id="software-developer-area">
			<h2>Software Developer | Highest Paid </h2>
			<h3>First Name:</h3>
			<div id="f1" class="first"></div>
			<h3>Last Name:</h3>
			<div class="last"></div>
			<h3>Salary:</h3>
			<div class="salary"></div>
			<h3>Average Salary:</h3>
			<h3 class="average"></h3>
		</section >
	</div>
	<script>


	</script>
	<!--Use the form inputs to search for employees. Then display the employees information in the #output <div>-->
	<section  id="search-area">
		<input type="text" placeholder="First Name" id="first-name">
		<input type="text" placeholder="Last Name" id="last-name">
		<input type="button" id="search-submit" value="search">
		<section id="search-output">
			<h2>Search Output</h2>
			<div class="output">
				<!--Output search info to here.-->
			</div>
		</section>
	</section >
<script>

</script>
	<!--Use the button inputs to display a list of everyone in that job-->
	<section  id="list-area">
		<input type="button" value="List Database Analysts" id="list-database-analyst">
		<input type="button" value="List Web Developers" id="list-web-developer">
		<input type="button" value="List Software Developers" id="list-software-developers" >
		<section id="list-output">
			<h2>List Output</h2>
			<div class="output">
				<!--Output list info to here.-->
			</div>
		</section>
	</section >

</body>
</html>